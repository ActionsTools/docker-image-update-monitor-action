name: "test"
on:
  workflow_dispatch:
  schedule:
    # Every 30 minute
    - cron: '*/5 * * * *'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
      with:
        path: "./"

    - name: Cache file
      uses: actions/cache@v3
      with:
        key: sharelatex#sharelatex_latest
        path: sharelatex#sharelatex_latest.json

    - name: Check DockerHub image with latest tag
      id: dockerhub_latest
      uses: ./
      with: 
        image: 'sharelatex/sharelatex'
        tag: 'latest'

    - name: Show results
      run: |
        echo ${{ steps.dockerhub_latest.outputs.has_update }}
        echo ${{ steps.dockerhub_latest.outputs.update_time }}